schema {
  query: Query
  mutation: Mutation
}

type Event {
  eventId: String!
  location: String
  notes: String
  roles: [Role!]
  start: String!
  type: EventType!
}

type User {
  userName: String!
  firstName: String!
  lastName: String!
  email: String!
  phone: String
  userName: String!
  password: String!
}

type MeetingEvent extends Event {
  isMonthly: Boolean
  end: String!
}

type CollectiveEvent extends Event {
  name: String!
  end: String
}

type BeekeepingEvent extends Event {
  job: BeekeepingJob!
  end: String
  completed: Boolean!
  hiveId: String
  attendance: [User]
}

type InspectEvent extends BeekeepingEvent {
  job: INSPECT!
  prep: String
  specialInstructions: String
  inspection: String
  nextSteps: String
  additonalNotes: String
}

type ExtractJob extends BeekeepingEvent {
  job: EXTRACT!
}

type TreatJob extends BeekeepingEvent {
  job: TREAT!
}

type FeedJob extends BeekeepingEvent {
  job: FEED!
}

type SplitJob extends BeekeepingEvent {
  job: SPLIT!
}

type NucJob extends BeekeepingEvent {
  job: NUC!
}

type EquipmentJob extends BeekeepingEvent {
  job: EQUIPMENT!
}


type Hive { 
  hiveId: String!
  name: String!
  location: String
  queen: Queen
  treatments: [Treatment]
  }

type Queen {
  age: String
  source: String
  type: String
  marked: Boolean
  markedColor: String
  clipped: Boolean
  lastSeen: String
}

type Treatment {
  name: String!
  date: String!
}

type Mutation {
  createEvent(input: EventInput!): Event!
  deleteEvent(eventId: String!): String!
  updateEvent(eventId: String!, input: EventInput!): Event!
  updateBeekeepingJob(eventId: String!, input: EventInput!): BeekeepingEvent!
}

type Query {
  getEvents(limit: Int, 
            dateRange: [String],
            future: Boolean,
            past: Boolean,
            type: [EventType],  
            isMonthly: Boolean,
            job:[BeekeepingJob],
            hive:[String]): [Event!]
  getEventById(eventId: String!): Event
  getTemplate: (type:EventType!, job:BeekeepingJob) : [String]
}

type Role {
  roleName: String!
  userName: String!
}

enum EventType {
  BEEKEEPING
  COLLECTIVE
  MEETING
}

enum BeekeepingJob {
  INSPECT
  EXTRACT
  TREAT
  FEED
  SPLIT
  NUC
  EQUIPMENT
}

input EventInput {
  end: String
  notes: String
  roles: [RoleInput!]!
  start: String!
  location: String
}

input MeetingEventInput {
  end: String!
  isMonthly: Boolean
}

input RoleInput {
  roleName: String!
  userName: String!
}

input BeekeepingEventInput {
  end: String!
  hiveId: String
  attendance: [String]
  completed: Boolean!
  job: BeekeepingJob!
  location: String
  notes: String
  roles: [RoleInput!]!
  start: String!
  type: EventType!
}